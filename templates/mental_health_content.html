<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Information - Mentally</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
</head>
<body>
    <div class="animated-background light">
        <div class="wave wave1"></div>
        <div class="wave wave2"></div>
    </div>

    <header>
        <div class="container">
            <h1 class="logo">Mentally</h1>
            <p class="tagline">Reducing Mental Health Stigma Using Augmented Reality (AR)</p>
            <nav>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/ar_experience">AR Experience</a></li>
                    <li><a href="/learn">Learn</a></li>
                    <li><a href="/simulations">Simulations</a></li>
                    <li><a href="/activities">Activities</a></li>
                    <li><a href="/mental_health_content" class="active">Resources</a></li>
                </ul>
            </nav>
            <button class="menu-toggle" aria-label="Toggle navigation menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <section class="page-header gradient-bg">
        <div class="container">
            <h2 data-aos="fade-up">Mental Health Information</h2>
            <p data-aos="fade-up" data-aos-delay="200">Explore facts, bust myths, and find helpful resources about mental health.</p>
        </div>
        <div class="wave-divider">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 100">
                <path fill="#ffffff" fill-opacity="1" d="M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
            </svg>
        </div>
    </section>

    <section class="content-section">
        <div class="container">
            <div class="tab-container fancy-tabs">
                <div class="tabs" data-aos="fade-up">
                    <button class="tab-btn active" data-tab="facts">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 22H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1zm-1-2V4H5v16h14zM8 7h8v2H8V7zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"/></svg>
                        Facts
                    </button>
                    <button class="tab-btn" data-tab="myths">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5.889 16H2a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h3.889l5.294-4.332a.5.5 0 0 1 .817.387v15.89a.5.5 0 0 1-.817.387L5.89 16zm13.517 4.134l-1.416-1.416A8.978 8.978 0 0 0 21 12a8.982 8.982 0 0 0-3.304-6.968l1.42-1.42A10.976 10.976 0 0 1 23 12c0 3.223-1.386 6.122-3.594 8.134zm-3.543-3.543l-1.422-1.422A3.993 3.993 0 0 0 16 12c0-1.43-.75-2.685-1.88-3.392l1.439-1.439A5.991 5.991 0 0 1 18 12c0 1.842-.83 3.49-2.137 4.591z"/></svg>
                        Myths & Facts
                    </button>
                    <button class="tab-btn" data-tab="resources">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 22H4a1 1 0 0 1-1-1V8h18v13a1 1 0 0 1-1 1zm1-16H3V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v3zM7 11v4h4v-4H7zm0 6v2h10v-2H7zm6-5v2h4v-2h-4z"/></svg>
                        Resources
                    </button>
                    <button class="tab-btn" data-tab="self-help">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z"/></svg>
                        Self-Help Tools
                    </button>
                </div>
                
                <div class="tab-indicator"></div>
                
                <div id="facts" class="tab-content active">
                    <h3 data-aos="fade-up">Mental Health Facts</h3>

                    <div class="facts-carousel" data-aos="fade-up">
                        <div class="carousel-container">
                            <div class="carousel-track">
                                {% for fact in content.facts %}
                                    <div class="fact-card">
                                        <div class="fact-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z"/></svg>
                                        </div>
                                        <p>{{ fact }}</p>
                                    </div>
                                {% endfor %}
                            </div>
                            <button class="carousel-btn prev" aria-label="Previous fact">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10.828 12l4.95 4.95-1.414 1.414L8 12l6.364-6.364 1.414 1.414z"/></svg>
                            </button>
                            <button class="carousel-btn next" aria-label="Next fact">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"/></svg>
                            </button>
                        </div>
                    </div>

                    <div class="action-box glass-effect" data-aos="fade-up">
                        <h4>Learn More In-Depth</h4>
                        <p>Ready to dive deeper into mental health topics? Our educational section provides comprehensive information with AR visualizations.</p>
                        <a href="/learn" class="btn primary glow">Explore Educational Content</a>
                    </div>
                </div>
                
                <div id="myths" class="tab-content">
                    <h3 data-aos="fade-up">Mental Health Myths & Facts</h3>
                    <p class="intro-text" data-aos="fade-up">Misconceptions about mental health contribute to stigma. Let's set the record straight with facts.</p>
                    
                    <div class="myths-container">
                        {% for item in content.myths %}
                            <div class="myth-fact-card flip-card" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
                                <div class="flip-card-inner">
                                    <div class="flip-card-front myth">
                                        <h4>Myth:</h4>
                                        <p>{{ item.myth }}</p>
                                    </div>
                                    <div class="flip-card-back fact">
                                        <h4>Fact:</h4>
                                        <p>{{ item.fact }}</p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    
                    <div class="action-box glass-effect" data-aos="fade-up">
                        <h4>Challenge Stigma</h4>
                        <p>Want to help break down mental health stigma? Try our interactive activities designed to challenge misconceptions.</p>
                        <a href="/activities" class="btn primary glow">Try Stigma-Busting Activities</a>
                    </div>
                </div>
                
                <div id="resources" class="tab-content">
                    <h3 data-aos="fade-up">Mental Health Resources</h3>
                    <p class="intro-text" data-aos="fade-up">Connect with these trusted organizations for support, information, and services.</p>
                    
                    <div class="resources-grid">
                        {% for resource in content.resources %}
                            <div class="resource-card elevated" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
                                <div class="resource-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z"/></svg>
                                </div>
                                <h4>{{ resource.name }}</h4>
                                <p>{{ resource.description }}</p>
                                <div class="card-actions">
                                    <a href="{{ resource.url }}" target="_blank" class="btn primary">Visit Website</a>
                                    <button class="btn-icon save-resource" data-resource="{{ resource.name }}" title="Save this resource">
                                        <span class="visually-hidden">Save</span>
                                        <svg width="20" height="20" viewBox="0 0 24 24">
                                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    
                    <div class="action-box glass-effect" data-aos="fade-up">
                        <h4>Find Local Support</h4>
                        <p>Looking for resources in your area? Our local resource finder can help you connect with nearby support.</p>
                        <a href="/local_resources" class="btn primary glow">Find Local Resources</a>
                    </div>
                </div>
                
                <div id="self-help" class="tab-content">
                    <h3 data-aos="fade-up">Self-Help Tools</h3>
                    <p class="intro-text" data-aos="fade-up">These evidence-based techniques can help support your mental wellbeing.</p>
                    
                    <div class="tools-grid">
                        <div class="tool-card" data-aos="fade-up">
                            <div class="tool-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z"/></svg>
                            </div>
                            <h4>Breathing Exercises</h4>
                            <p>Simple breathing techniques can help reduce stress and anxiety in the moment.</p>
                            <div class="tool-content">
                                <ol class="numbered-steps">
                                    <li>Find a comfortable position</li>
                                    <li>Breathe in slowly through your nose for 4 counts</li>
                                    <li>Hold your breath for 1-2 counts</li>
                                    <li>Exhale slowly through your mouth for 6 counts</li>
                                    <li>Repeat 5-10 times</li>
                                </ol>
                                <div class="try-tool">
                                    <button class="btn secondary try-breathe">Try Now</button>
                                    <a href="/mindfulness" class="btn secondary">Guided exercises</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tool-card" data-aos="fade-up" data-aos-delay="100">
                            <div class="tool-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z"/></svg>
                            </div>
                            <h4>Grounding Techniques</h4>
                            <p>Use the 5-4-3-2-1 technique to ground yourself during moments of stress or anxiety.</p>
                            <div class="tool-content">
                                <ul class="grounding-list">
                                    <li><strong>5:</strong> Name 5 things you can see</li>
                                    <li><strong>4:</strong> Name 4 things you can touch/feel</li>
                                    <li><strong>3:</strong> Name 3 things you can hear</li>
                                    <li><strong>2:</strong> Name 2 things you can smell</li>
                                    <li><strong>1:</strong> Name 1 thing you can taste</li>
                                </ul>
                                <div class="try-tool">
                                    <button class="btn secondary try-grounding">Try Now</button>
                                    <a href="/mindfulness#grounding" class="btn secondary">Learn more</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tool-card" data-aos="fade-up" data-aos-delay="200">
                            <div class="tool-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z"/></svg>
                            </div>
                            <h4>Thought Challenging</h4>
                            <p>Learn to identify and challenge negative thought patterns.</p>
                            <div class="tool-content">
                                <p>When you notice a negative thought:</p>
                                <ol class="numbered-steps">
                                    <li>Identify the thought</li>
                                    <li>Examine the evidence</li>
                                    <li>Consider alternatives</li>
                                    <li>Reframe the thought</li>
                                </ol>
                                <div class="try-tool">
                                    <button class="btn secondary try-thought">Try Now</button>
                                    <a href="/mindfulness#thoughts" class="btn secondary">Learn more</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ar-tool-promo glass-effect" data-aos="fade-up">
                        <h4>Experience Our AR Self-Care Tools</h4>
                        <p>Enhance your self-care practice with our augmented reality tools that guide you through mindfulness exercises in your own space.</p>
                        <a href="/ar_mindfulness" class="btn primary glow">Try AR Mindfulness</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="interactive-tool-modal" class="modal hidden">
        <div class="modal-content">
            <button class="close-modal">âœ•</button>
            <div class="modal-body">
                <!-- Tool content will be loaded here -->
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>Mentally</h3>
                    <p>Reducing Mental Health Stigma Using Augmented Reality (AR)</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/learn">Learn</a></li>
                        <li><a href="/simulations">Simulations</a></li>
                        <li><a href="/activities">Activities</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="/mental_health_content">Information</a></li>
                        <li><a href="/local_resources">Find Local Support</a></li>
                        <li><a href="/mindfulness">Mindfulness Exercises</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Mentally Project. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        // Initialize AOS animations
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });
        
        // Initialize tabs
        initTabs();
        
        // Carousel functionality for facts
        const carouselTrack = document.querySelector('.carousel-track');
        const prevBtn = document.querySelector('.carousel-btn.prev');
        const nextBtn = document.querySelector('.carousel-btn.next');
        const factCards = document.querySelectorAll('.fact-card');
        let currentIndex = 0;
        
        if (carouselTrack && factCards.length > 0) {
            // Set initial position
            updateCarousel();
            
            // Event listeners for carousel buttons
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    currentIndex = (currentIndex > 0) ? currentIndex - 1 : factCards.length - 1;
                    updateCarousel();
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    currentIndex = (currentIndex < factCards.length - 1) ? currentIndex + 1 : 0;
                    updateCarousel();
                });
            }
        }
        
        function updateCarousel() {
            if (carouselTrack) {
                const cardWidth = factCards[0].offsetWidth;
                carouselTrack.style.transform = `translateX(-${currentIndex * (cardWidth + 20)}px)`;
            }
        }
        
        // Flip card functionality for myths & facts
        document.querySelectorAll('.flip-card').forEach(card => {
            card.addEventListener('click', function() {
                card.querySelector('.flip-card-inner').classList.toggle('flipped');
            });
        });
        
        // Interactive self-help tools
        const modal = document.getElementById('interactive-tool-modal');
        const modalBody = modal?.querySelector('.modal-body');
        const closeModal = modal?.querySelector('.close-modal');
        
        // Close modal when clicking X or outside the modal content
        if (closeModal) {
            closeModal.addEventListener('click', () => {
                modal.classList.add('hidden');
            });
        }
        
        if (modal) {
            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        }
        
        // Breathing exercise
        document.querySelector('.try-breathe')?.addEventListener('click', function() {
            if (modalBody) {
                modalBody.innerHTML = `
                    <h3>Breathing Exercise</h3>
                    <div class="breathing-animation">
                        <div class="breathing-circle"></div>
                        <p class="breathing-instruction">Breathe in...</p>
                    </div>
                    <div class="breathing-timer">
                        <p>Remaining: <span id="breath-count">5</span> breaths</p>
                    </div>
                    <button class="btn primary" id="stop-breathing">End Exercise</button>
                `;
                
                modal.classList.remove('hidden');
                startBreathingExercise();
                
                document.getElementById('stop-breathing')?.addEventListener('click', function() {
                    modal.classList.add('hidden');
                });
            }
        });
        
        // Grounding exercise
        document.querySelector('.try-grounding')?.addEventListener('click', function() {
            if (modalBody) {
                modalBody.innerHTML = `
                    <h3>5-4-3-2-1 Grounding Exercise</h3>
                    <div class="grounding-step active" data-step="5-see">
                        <h4>5: See</h4>
                        <p>Name 5 things you can see right now</p>
                        <div class="grounding-inputs">
                            <input type="text" placeholder="1..." class="grounding-input">
                            <input type="text" placeholder="2..." class="grounding-input">
                            <input type="text" placeholder="3..." class="grounding-input">
                            <input type="text" placeholder="4..." class="grounding-input">
                            <input type="text" placeholder="5..." class="grounding-input">
                        </div>
                        <button class="btn secondary next-grounding-step">Next</button>
                    </div>
                    <!-- Additional steps will be added by JavaScript -->
                    <button class="btn primary" id="stop-grounding">End Exercise</button>
                `;
                
                modal.classList.remove('hidden');
                setupGroundingExercise();
                
                document.getElementById('stop-grounding')?.addEventListener('click', function() {
                    modal.classList.add('hidden');
                });
            }
        });
        
        // Thought challenging
        document.querySelector('.try-thought')?.addEventListener('click', function() {
            if (modalBody) {
                modalBody.innerHTML = `
                    <h3>Thought Challenging Exercise</h3>
                    <div class="thought-form">
                        <div class="form-group">
                            <label for="negative-thought">Identify a negative thought:</label>
                            <textarea id="negative-thought" placeholder="Write your thought here..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="evidence-for">Evidence that supports this thought:</label>
                            <textarea id="evidence-for" placeholder="List evidence that seems to support this thought..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="evidence-against">Evidence that doesn't support this thought:</label>
                            <textarea id="evidence-against" placeholder="List evidence that doesn't support this thought..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="alternative-thought">Alternative, more balanced thought:</label>
                            <textarea id="alternative-thought" placeholder="Write a more balanced perspective..."></textarea>
                        </div>
                        <button class="btn primary" id="save-thought">Save to Journal</button>
                        <button class="btn secondary" id="stop-thought">Close</button>
                    </div>
                `;
                
                modal.classList.remove('hidden');
                
                document.getElementById('save-thought')?.addEventListener('click', function() {
                    alert('Thought saved to your journal (Note: This is a demo feature)');
                });
                
                document.getElementById('stop-thought')?.addEventListener('click', function() {
                    modal.classList.add('hidden');
                });
            }
        });
        
        // Breathing exercise functionality
        function startBreathingExercise() {
            const circle = document.querySelector('.breathing-circle');
            const instruction = document.querySelector('.breathing-instruction');
            const countElement = document.getElementById('breath-count');
            
            if (!circle || !instruction || !countElement) return;
            
            let phase = 'inhale'; // inhale, hold, exhale
            let breathCount = 5;
            let timer;
            
            function updateBreathingAnimation() {
                if (phase === 'inhale') {
                    circle.style.transform = 'scale(1.5)';
                    instruction.textContent = 'Breathe in...';
                    setTimeout(() => {
                        phase = 'hold';
                        updateBreathingAnimation();
                    }, 4000);
                } else if (phase === 'hold') {
                    instruction.textContent = 'Hold...';
                    setTimeout(() => {
                        phase = 'exhale';
                        updateBreathingAnimation();
                    }, 1500);
                } else if (phase === 'exhale') {
                    circle.style.transform = 'scale(1)';
                    instruction.textContent = 'Breathe out...';
                    setTimeout(() => {
                        breathCount--;
                        countElement.textContent = breathCount;
                        
                        if (breathCount <= 0) {
                            instruction.textContent = 'Great job!';
                            setTimeout(() => {
                                modal.classList.add('hidden');
                            }, 2000);
                            return;
                        }
                        
                        phase = 'inhale';
                        updateBreathingAnimation();
                    }, 6000);
                }
            }
            
            updateBreathingAnimation();
        }
        
        // Setup grounding exercise
        function setupGroundingExercise() {
            const groundingSteps = [
                {id: '5-see', title: '5: See', instruction: 'Name 5 things you can see right now', count: 5},
                {id: '4-touch', title: '4: Touch', instruction: 'Name 4 things you can touch or feel', count: 4},
                {id: '3-hear', title: '3: Hear', instruction: 'Name 3 things you can hear', count: 3},
                {id: '2-smell', title: '2: Smell', instruction: 'Name 2 things you can smell (or like the smell of)', count: 2},
                {id: '1-taste', title: '1: Taste', instruction: 'Name 1 thing you can taste (or like the taste of)', count: 1}
            ];
            
            let currentStepIndex = 0;
            
            // Event delegation for next step buttons
            document.addEventListener('click', function(e) {
                if (e.target && e.target.classList.contains('next-grounding-step')) {
                    currentStepIndex++;
                    
                    if (currentStepIndex < groundingSteps.length) {
                        const currentStep = document.querySelector('.grounding-step.active');
                        if (currentStep) {
                            currentStep.classList.remove('active');
                            
                            // Create next step
                            const step = groundingSteps[currentStepIndex];
                            const nextStep = document.createElement('div');
                            nextStep.className = 'grounding-step active';
                            nextStep.dataset.step = step.id;
                            
                            let inputsHTML = '';
                            for (let i = 0; i < step.count; i++) {
                                inputsHTML += `<input type="text" placeholder="${i+1}..." class="grounding-input">`;
                            }
                            
                            nextStep.innerHTML = `
                                <h4>${step.title}</h4>
                                <p>${step.instruction}</p>
                                <div class="grounding-inputs">
                                    ${inputsHTML}
                                </div>
                                <button class="btn secondary next-grounding-step">Next</button>
                            `;
                            
                            currentStep.insertAdjacentElement('afterend', nextStep);
                        }
                    } else {
                        const allSteps = document.querySelectorAll('.grounding-step');
                        if (allSteps.length > 0) {
                            const lastStep = allSteps[allSteps.length - 1];
                            lastStep.insertAdjacentHTML('afterend', `
                                <div class="grounding-complete">
                                    <h4>Exercise Complete!</h4>
                                    <p>Great job! How do you feel now?</p>
                                </div>
                            `);
                        }
                        e.target.remove();
                    }
                }
            });
        }
    </script>
</body>
</html>
